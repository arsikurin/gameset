# Gameset: написание интерактора

## Об интеракторе
Интерактор является программой на C++ с точкой входа (функцией `main(int argc, char **argv)`). Функция `main` должна принимать параметры `argc` и `argv`, это необходимо для взаимодействия с решениями участников.

Для написания интеракторов необходимо использовать специальную библиотеку: `#include "interactor_lib.h"`

Интерактору **запрещается** использовать поток стандартного вывода `stdout` (`printf`, `std::cout`, ...), потому что он используется для подведения итогов.

## Инициализация
В начале функции `main` необходимо создать объект класса `Interactor`, передав ему `argc` и `argv`, например, так:

```c++
#include "interactor_lib.h"

int main(int argc, char **argv) {
  Interactor interactor(argc, argv);  // <--- создание Interactor
  // ...
}
```

## Взаимодействие
Класс `Interactor` содержит поле `processes` типа `std::vector<Process>`. Как можно использовать объект типа Process:

```c++
interactor.processes[0] << "Hello!" << std::endl;  // послать 0-му процессу строку "Hello" на стандартный ввод
bool success = interactor.processes[0].is_alive();  // проверить, удалась ли запись или процесс решения остановлен
std::string result;
interactor.processes[0] >> result;  // считать результат с потока стандартного вывода 0-го процесса
```

Процессы нумеруются с нуля.

> TODO Непонятно, как лучше обрабатывать ошибки чтения и записи при использовании getline(stream, s), поэтому пока что потоки ввода нельзя использовать кроме как через операторы `<<` и `>>` объекта `Process`

## Подведение итогов
> TODO Ничьи. Пока что есть только один победитель

Для того, чтобы подвести итоги партии, существует функция
- `interactor.finalize_ok(int winner)`: интерактор сработал правильно, передаётся номер выигравшего процесса.

> Эта функция выводит пока что только `winner` в `STDOUT` интерактора, возможно, добавится что-то ещё

Функцию можно вызывать только один раз, после вызова программа завершается. Перед вызовом, возможно, нужно послать решениям особый сигнал о завершении партии (например, `-1` после хода).

Интерактор может вывести в поток ошибок `stderr` (при помощи `std::cerr`) лог игры в удобном для автора формате для визуализации.

